// enable strict mode

"use strict";


// define variables

var OutField = document.getElementById("code");
var SoftwarePath = document.getElementById("softwarePath");
var PipelineName = document.getElementById("pipelineName");
var InfileName = document.getElementById("infileName");
var YourPipelineName = document.getElementById("yourPipelineName");
var codeHeader = "#!bin/bash\n#Pipeline generated by ANGSDgui\n";


// define functions for inputs
var getCodeHeader = function(){
    OutField.innerHTML = codeHeader;
}

var getSoftwarePath = function(){
    if(SoftwarePath.value){
        return SoftwarePath.value + "/angsd ";
    }else{
        return "angsd ";
    }
}

var getInfileName = function(){
    if(InfileName.value){
        return InfileName.value;
    }else{
        return "";
    }
}

var getPipelineName = function(){
    if(PipelineName.value){
        YourPipelineName.innerHTML = PipelineName.value;
    }else{
        YourPipelineName.innerHTML = "";
    }
}

// update code onkeyup
var updateCode = function(){
    var code = codeHeader;
    code += getSoftwarePath();
    code += getInfileName();
    return code;
}


// rewrite code
var rewriteCode = function(){
    getPipelineName();
    var newCode = updateCode();
    OutField.innerHTML = newCode;
}


//var array = updateCode().split(" ");
//var blob = new Blob([array], type:"application/octet-binary"});
//var url = URL.createObjectURL(blob);
//

var Download = function(){
    download(OutField.innerHTML, "pipeline", "text/plain");
}


window.onload=getCodeHeader();
